---
title: 'ACSD-68499: la mutazione GraphQL updateCartItems restituisce *success* per quantità superiori alle scorte disponibili'
description: Applica la patch ACSD-68499 per risolvere il problema Adobe Commerce, in cui la mutazione "updateCartItems" di GraphQL restituisce una risposta *success* errata durante l’aggiornamento di quantità che superano le scorte disponibili, dando luogo a quantità e totali gonfiati.
feature: GraphQL, Shopping Cart
role: Admin, Developer
type: Troubleshooting
source-git-commit: 2a0642ae5186da39d22aad0fc9e45c9b371c5ab9
workflow-type: tm+mt
source-wordcount: '360'
ht-degree: 0%

---


# ACSD-68499: la mutazione GraphQL updateCartItems restituisce *success* per quantità superiori alle scorte disponibili

La patch ACSD-68499 risolve il problema per cui la mutazione GraphQL `updateCartItems` restituisce una risposta *success* non corretta durante l&#39;aggiornamento di quantità che superano le scorte disponibili, con conseguente aumento di quantità e totali. Questa patch è disponibile quando è installato [[!DNL Quality Patches Tool (QPT)]](/help/tools/quality-patches-tool/quality-patches-tool-to-self-serve-quality-patches.md) 1.1.74. L’ID della patch è ACSD-68499. Questo problema è pianificato per la risoluzione in Adobe Commerce 2.4.9.

## Prodotti e versioni interessati

**La patch è stata creata per la versione di Adobe Commerce:**

* Adobe Commerce (tutti i metodi di implementazione) 2.4.8-p2

**Compatibile con le versioni di Adobe Commerce:**

* Adobe Commerce (tutti i metodi di implementazione) 2.4.4 - 2.4.8-p3

>[!NOTE]
>
>La patch potrebbe diventare applicabile ad altre versioni con le nuove versioni di [!DNL Quality Patches Tool]. Per verificare se la patch è compatibile con la versione di Adobe Commerce in uso, aggiornare il pacchetto `magento/quality-patches` alla versione più recente e verificare la compatibilità nella pagina [[!DNL Quality Patches Tool]: Cerca patch](https://experienceleague.adobe.com/tools/commerce-quality-patches/index.html?lang=it). Utilizza l’ID patch come parola chiave di ricerca per individuare la patch.

## Problema

La mutazione GraphQL `updateCartItems` in Adobe Commerce restituisce erroneamente la risposta *success* durante l&#39;aggiornamento delle quantità oltre le scorte disponibili, causando totali e quantità gonfiate nel carrello.

<u>Passaggi da riprodurre</u>:

1. Crea un carrello vuoto.
1. Aggiungi al carrello un prodotto con scorte limitate (ad esempio, 10 unità disponibili).
1. Eseguire una query sul carrello e prendere nota di `cart_item_id`.
1. Aggiorna la quantità dell’articolo nel carrello a 100 (supera la scorta disponibile di 10) utilizzando la seguente mutazione:

   ```
   mutation ($cart: String!, $cartItemId: Int!, $quantity: Float!) {
     updateCartItems(
       input: {
         cart_id: $cart
         cart_items: [{ cart_item_id: $cartItemId, quantity: $quantity }]
       }
     ) {
       cart {
         items {
           product {
             name
           }
           quantity
         }
         prices {
           grand_total {
             value
             currency
           }
         }
       }
     }
   }
   ```

1. Eseguire nuovamente una query sul carrello per verificare la quantità effettiva.

<u>Risultati previsti</u>:

La convalida del magazzino impedisce aggiornamenti di quantità non validi.

<u>Risultati effettivi</u>:

La mutazione `updateCartItems` restituisce la risposta *success* con una quantità di 100.

## Applicare la patch

Per applicare singole patch, utilizzare i collegamenti seguenti, a seconda del metodo di distribuzione utilizzato:

* Adobe Commerce o Magento Open Source on-premise: [[!DNL Quality Patches Tool] > Utilizzo](/help/tools/quality-patches-tool/usage.md) nella guida di [!DNL Quality Patches Tool].
* Adobe Commerce su infrastruttura cloud: [Aggiornamenti e patch > Applica patch](https://experienceleague.adobe.com/docs/commerce-cloud-service/user-guide/develop/upgrade/apply-patches.html?lang=it) nella guida Commerce su infrastruttura cloud.

## Lettura correlata

Per ulteriori informazioni su [!DNL Quality Patches Tool], vedere:

* [[!DNL Quality Patches Tool]: strumento self-service per patch di qualità](/help/tools/quality-patches-tool/quality-patches-tool-to-self-serve-quality-patches.md) nella guida degli strumenti.
